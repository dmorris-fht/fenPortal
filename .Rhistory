shiny::runApp()
install.packages("shinyTime")
runApp()
runApp()
shiny::runApp()
con <- FenDb("dmorris","Taraxacum1!")
con <- FenDb("dmorris","Taraxacum1!")
con <- fenDb("dmorris","Taraxacum1!")
x <- dbGetQuery(con, "SELECT
s.id AS id,
s.survey,
s.survey_type AS survey_type_code,
s.start_date,
s.end_date,
s.start_year,
s.end_year,
s.source,
s.project AS projectid,
s.sharing AS sharing_code,
s.copyright,
s.description AS description,
s.url,
s.created_user,
s.last_edited_user,
s.created_date,
s.last_edited_date,
st.description AS survey_type,
st.description AS sharing,
p.project AS project
FROM
records.surveys s,
records.projects p,
lookups.lookup_sharing sh,
lookups.lookup_survey_types st
WHERE
s.project = p.id AND
s.sharing = sh.code AND
s.survey_type = st.code
")
x$year_0 <- pmin(year(x$start_date),x$start_year,na.rm=T)
x$year_1 <- pmax(year(x$end_date),x$end_year,na.rm=T)
x$range <- apply(x[,c("year_0","year_1")],1,year_range)
x$range
year_range(c(NA,2018))
year_range(c(2011,2018))
v <- c(2011,2018)
v[1]
as.character(v[1])
x <- v[1]
y <- v[2]
isTruthy(x) && isTruthy(y)
x == y
paste(x,y,sep="-")
year_range(v)
isTruthy(x) && !isTruthy(y)
!isTruthy(x) && isTruthy(y)
!isTruthy(x) && !isTruthy(y)
if(isTruthy(x) && isTruthy(y)){
if(x == y){
return(x)
}
else{
return(paste(x,y,sep="-"))
}
}
if(isTruthy(x) && !isTruthy(y)){
return(x)
}
if(!isTruthy(x) && isTruthy(y)){
return(paste0("-",y))
}
if(!isTruthy(x) && !isTruthy(y)){
return(NA)
}
if(isTruthy(x) && isTruthy(y)){
if(x == y){
return(x)
}
else{
return(paste(x,y,sep="-"))
}
}
isTruthy(x) && isTruthy(y)
year_range <- function(x){
x <-as.character(x[1])
y <- as.character(x[2])
if(isTruthy(x) && isTruthy(y)){
if(x == y){
return(x)
}else{
return(paste(x,y,sep="-"))
}
}
if(isTruthy(x) && !isTruthy(y)){
return(x)
}
if(!isTruthy(x) && isTruthy(y)){
return(paste0("-",y))
}
if(!isTruthy(x) && !isTruthy(y)){
return(NA)
}
}
year_range(v)
v
isTruthy(x) && !isTruthy(y)
x <-as.character(v[1])
y <- as.character(v[2])
isTruthy(x) && isTruthy(y
)
x == y
year_range <- function(v){
x <-as.character(v[1])
y <- as.character(v[2])
if(isTruthy(x) && isTruthy(y)){
if(x == y){
return(x)
}else{
return(paste(x,y,sep="-"))
}
}
if(isTruthy(x) && !isTruthy(y)){
return(x)
}
if(!isTruthy(x) && isTruthy(y)){
return(paste0("-",y))
}
if(!isTruthy(x) && !isTruthy(y)){
return(NA)
}
}
year_range(v)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
format(Sys.time(),format="%Y%m%d%h%m%s")
format(Sys.time(),format="%Y%M%d%h%m%s")
format(Sys.time(),format="%Y%m%d%h%m%s")
format(Sys.time(),format="%d")
format(Sys.time(),format="%h")
format(Sys.time(),format="%Y%m%d%H%M%S")
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
